<div class="chapter" ng-show="chapter">
    <h3>{{chapter.title}}</h3>
    <p class="comment">{{chapter.summary}}</p>

    <div ng-repeat="entry in chapter.entries" ng-switch="entry.type" class="chapterEntry {{entry.type}}">
        <div ng-switch-when="comment">
            <p>{{entry.text}}</p>
        </div>
        <div ng-switch-when="quantifier">
            <div class="result">
                <h5>Quantifier: {{entry.defaultStatement}}</h5>
                <div ng-if="entry.definingStatement">
                    {{entry.defaultStatement}} is defined to mean {{entry.definingStatement}}
                </div>
            </div>
        </div>
        <div ng-switch-when="statement">
            <div class="result">
                <h5>Statement Definition: {{entry.defaultStatement}}</h5>
                <div ng-if="entry.premises.length">
                    Suppose
                    <span ng-if="entry.premises.length > 1">
                        {{entry.premises.slice(0, entry.premises.length - 1).join(", ")}}
                        and
                    </span>
                    {{entry.premises[entry.premises.length - 1]}}.
                </div>
                <div ng-if="entry.definingStatement">
                    <span ng-if="entry.premises.length">Then</span>
                    "{{entry.defaultStatement}}" is defined to mean "{{ entry.definingStatement }}"
                </div>
            </div>
        </div>
        <div ng-switch-when="term">
            <div class="result">
                <h5>Term Definition: {{entry.defaultTerm}}</h5>
                <div ng-if="entry.premises.length">
                    Suppose
                    <span ng-if="entry.premises.length > 1">
                        {{entry.premises.slice(0, entry.premises.length - 1).join(", ")}}
                        and
                    </span>
                    {{entry.premises[entry.premises.length - 1]}}.
                </div>
                <div>
                    <span ng-if="entry.premises.length">Then</span>
                    {{entry.defaultTerm}} is defined by {{ entry.definition }}
                </div>
            </div>
        </div>
        <div ng-switch-when="rule">
            <div class="result">
                <h5>Rule: {{entry.id}}</h5>
                <div class="resultBlock">
                    {{entry.assumption ? entry.assumption + ' ⊢' : ''}}
                    {{entry.premises.join(" & ")}}
                    <span class="ruleSeparator">⇒</span>
                    {{entry.conclusion}}
                </div>
                <div ng-if="entry.arbitraryVariables.length" class="arbitraryVariables">
                    Arbitrary variables: {{entry.arbitraryVariables.join(", ")}}
                </div>
                <div ng-if="entry.distinctVariables.length" class="distinctVariables">
                    Distinct variables:
                    <span ng-repeat="requirement in entry.distinctVariables">
                        {{requirement.termVariable}} must not appear in {{requirement.variables.join(", ")}}
                    </span>
                </div>
                </table>
            </div>
        </div>
        <div ng-switch-when="axiom">
            <div class="result">
                <h5>Axiom: {{entry.title}}</h5>
                <div ng-if="entry.premises.length">
                    Suppose
                    <span ng-if="entry.premises.length > 1">
                        {{entry.premises.slice(0, entry.premises.length - 1).join(", ")}}
                        and
                    </span>
                    {{entry.premises[entry.premises.length - 1]}}.
                </div>
                <div>
                    <span ng-if="entry.premises.length">Then</span>
                    {{entry.conclusion}}.
                </div>
                <div class="arbitraryVariables" ng-if="entry.arbitraryVariables.length">
                    Arbitrary variables: {{entry.arbitraryVariables.join(", ")}}
                </div>
                <div class="distinctVariables" ng-if="entry.distinctVariables.length">
                    Distinct variables:
                    <span ng-repeat="requirement in entry.distinctVariables"
                          class="distinctVariable">({{requirement.termVariable}} in {{requirement.variables.join(", ")}})</span>
                </div>
            </div>
        </div>
        <div ng-switch-when="theorem">
            <theorem theorem="entry"></theorem>
        </div>
    </div>
</div>
