Introduce the Axiom of Replacement.

axiom Axiom of Replacement
statementVariables(φ 2)
termVariables(a 0)
premise ∀ x → ∈ $0 a ∃! y with ($$0 $0) φ
conclusion ∃ z ∀ y ↔ ∈ $0 $$0 ∃ x ∧ ∈ $0 a with ($0 $$0) φ

theorem Unique Replacement
statementVariables(φ 2)
termVariables(a 0)
premise ∀ x → ∈ $0 a ∃! y with ($$0 $0) φ
conclusion ∃! z ∀ y ↔ ∈ $0 $$0 ∃ x ∧ ∈ $0 a with ($0 $$0) φ
{
  prove ∃ z ∀ y ↔ ∈ $0 $$0 ∃ x ∧ ∈ $0 a with ($0 $$0) φ aca1535211144c546f3bc203f1bbcadafb901e52c221cae5eb790a78d3ad846c (with ($0 $1) φ) (a) p0
  prove ∃! z ∀ y ↔ ∈ $0 $$0 ∃ x ∧ ∈ $0 a with ($0 $$0) φ 288a339c30f6b561d0a86d8a4ad51c2acccaa964cc586fd001f47dde466ba92c (∃ x ∧ ∈ $0 a with ($0 $$0) φ) () 0
}

theorem Existence of Replacement Set
termVariables(A 0, F 1)
conclusion ∃! B ∀ b ↔ ∈ $0 $$0 ∃ a ∧ ∈ $0 A = $$0 with ($0) F
{
  take a {
    assume ∈ $0 A {
      prove ∃! b = $0 with ($$0) F 8bd430aa127bd6eb6ab68bdc4b82882686238ffa92fc641c4ddb1f14b418aa1f () (with ($0) F)
    }
  }
  prove ∃! B ∀ b ↔ ∈ $0 $$0 ∃ a ∧ ∈ $0 A = $$0 with ($0) F b9824fd6f00092a866dd6293c23a983e93e0ddf13a433df477ab83cd6fbf83fa (= $1 with ($0) F) (A) 0
}

term replacementSet ($x A with x F)
  name (Replacement Set)
  format ({ F | x ∈ A }) no-component-brackets
  (∀ y ↔ ∈ $0 $$0 ∃ a ∧ ∈ $0 A = $$0 with ($0) F)

theorem Membership Condition for Replacement Set
termVariables(S 0, A 0, F 1)
premise = S replacementSet a A with ($0) F
conclusion ∀ s ↔ ∈ $0 S ∃ a ∧ ∈ $0 A = $$0 with ($0) F
{
  prove ∀ y ↔ ∈ $0 replacementSet x A with ($0) F ∃ a ∧ ∈ $0 A = $$0 with ($0) F 09ea54ce7130323780100ef7e69b72ffa0ecea8eeaf035264fd00edc1b09a66d () (A, with ($0) F)
  take s {
    prove ↔ ∈ $0 replacementSet x A with ($0) F ∃ a ∧ ∈ $0 A = $$0 with ($0) F b501ae82c9cd785ac59610aad18f8065a5643b29c10ad4d5821c383cbf7cd34f (↔ ∈ $$0 replacementSet x A with ($0) F ∃ a ∧ ∈ $0 A = $$$0 with ($0) F) ($0) 0
    elided 0bc84cc60c63f0bedf5c3154e0f6f9cea15795bc911992d3489e79c2f021d6ed {
      prove = replacementSet a A with ($0) F S da679729d278df4b182648b422dd5be34e04602616257aa55b676ca4f04bce58 () (S, replacementSet a A with ($0) F) p0
      prove ↔ ∈ $0 S ∃ a ∧ ∈ $0 A = $$0 with ($0) F 0bc84cc60c63f0bedf5c3154e0f6f9cea15795bc911992d3489e79c2f021d6ed (↔ ∈ $0 $$0 ∃ a ∧ ∈ $0 A = $$0 with ($0) F) (replacementSet a A with ($0) F, S) 1.1.0 1.0
    }
  }
}

theorem Replacement Set Is Subset
termVariables(S 0, A 0, F 1, B 0)
premise = S replacementSet a A with ($0) F
premise ∀ a → ∈ $0 A ∈ with ($0) F B
conclusion ⊆ S B
{
  take b {
    assume ∈ $0 S {
      elided a3f282079afb1fa8f19f1ec41d266e04f42bbbfda380567062641fe163fab6ec {
        prove ∀ s ↔ ∈ $0 S ∃ a ∧ ∈ $0 A = $$0 with ($0) F a3f282079afb1fa8f19f1ec41d266e04f42bbbfda380567062641fe163fab6ec () (S, A, with ($$0) F) p0
        prove ↔ ∈ $0 S ∃ a ∧ ∈ $0 A = $$0 with ($0) F b501ae82c9cd785ac59610aad18f8065a5643b29c10ad4d5821c383cbf7cd34f (↔ ∈ $$0 S ∃ a ∧ ∈ $0 A = $$$0 with ($0) F) ($0) 0.0.0.0
        prove → ∈ $0 S ∃ a ∧ ∈ $0 A = $$0 with ($0) F 3dee2da91a324273fff20924f29a7df9b6388f1f48ae09e93b292e42b3546ae7 (∈ $0 S, ∃ a ∧ ∈ $0 A = $$0 with ($0) F) () 0.0.0.1
        prove ∃ a ∧ ∈ $0 A = $$0 with ($0) F 00f52187d02fb3be4132cd306e1d837f6d5c90acd4e3ff73fc02416356b758b4 (∈ $0 S, ∃ a ∧ ∈ $0 A = $$0 with ($0) F) () 0.0.0.2 0.0a
      }
      let a_b ∧ ∈ $0 A = $$0 with ($0) F 30412315b8eb88fa8dd1fa23362d9aea6a428afe70be747bb9e02eea9ec6b3f7 (∧ ∈ $$0 A = $0 with ($$0) F, ∈ $0 B) () {
        elided 00f52187d02fb3be4132cd306e1d837f6d5c90acd4e3ff73fc02416356b758b4 {
          prove → ∈ $0 A ∈ with ($0) F B b501ae82c9cd785ac59610aad18f8065a5643b29c10ad4d5821c383cbf7cd34f (→ ∈ $$$0 A ∈ with ($$$0) F B) ($0) p1
          prove ∈ with ($0) F B 00f52187d02fb3be4132cd306e1d837f6d5c90acd4e3ff73fc02416356b758b4 (∈ $0 A, ∈ with ($0) F B) () 0.0.1.0.0 0.0.1a 827ecc2b1b19ca976022860dade4c605eef6eb2908bc2934591a9a8abf32ab5a
        }
        prove ∈ $$0 B 2f09d05868429e1af035bd8050cb3d39de6550c92033f6fbc9deaa3a929b7b09 (∈ $$$0 B) ($$0, with ($0) F) 0.0.1a 062123718abc1909811caf4720d2507f5265f54ca9003f4bda14c8d757d44a29 0.0.1.0
      } 0.0.0
    }
  }
  prove ⊆ S B ec7fc0729669e6268d01ee93cfc031e0baa57e3a4871bcbc82ca754bc591f204 () (S, B) 0
}

theorem Function of Element is Element of Replacement Set
termVariables(S 0, A 0, F 1, a 0)
premise = S replacementSet a A with ($0) F
premise ∈ a A
conclusion ∈ with (a) F S
{
  prove = with (a) F with (a) F 12132c1c387352ed15f80fb5954b5d7a80c2cb58f6f290f43d9b4417b54bc465 () (with (a) F)
  elided 0de244e67f8bd3b7ed1f30bff6577fb62d16c4e035fb38e91455fabc625f43f2 {
    prove ∧ ∈ a A = with (a) F with (a) F 301900ba992fe47a3f300cf9f14f0fd6a948ca32c488285b6f4cf2d02efc3a61 (∈ a A, = with (a) F with (a) F) () p1 0
    prove ∃ x ∧ ∈ $0 A = with (a) F with ($0) F 0de244e67f8bd3b7ed1f30bff6577fb62d16c4e035fb38e91455fabc625f43f2 (∧ ∈ $0 A = with (a) F with ($0) F) (a) 1.0
  }
  elided a3f282079afb1fa8f19f1ec41d266e04f42bbbfda380567062641fe163fab6ec {
    prove ∀ s ↔ ∈ $0 S ∃ a ∧ ∈ $0 A = $$0 with ($0) F a3f282079afb1fa8f19f1ec41d266e04f42bbbfda380567062641fe163fab6ec () (S, A, with ($0) F) p0
    prove ↔ ∈ with (a) F S ∃ a ∧ ∈ $0 A = with (a) F with ($0) F b501ae82c9cd785ac59610aad18f8065a5643b29c10ad4d5821c383cbf7cd34f (↔ ∈ $0 S ∃ a ∧ ∈ $0 A = $$0 with ($0) F) (with (a) F) 2.0
    prove → ∃ a ∧ ∈ $0 A = with (a) F with ($0) F ∈ with (a) F S 282eb8b17a1260b27adcabbcf0e8b894697750b7d7f4fb3aacf467cf90ad46d6 (∈ with (a) F S, ∃ a ∧ ∈ $0 A = with (a) F with ($0) F) () 2.1
    prove ∈ with (a) F S 00f52187d02fb3be4132cd306e1d837f6d5c90acd4e3ff73fc02416356b758b4 (∃ a ∧ ∈ $0 A = with (a) F with ($0) F, ∈ with (a) F S) () 2.2 1
  }
}
