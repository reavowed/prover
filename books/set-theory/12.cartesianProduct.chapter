Introduce the Cartesian product of two sets, a×b.

theorem Ordered Pair Is Element of Double Power Set of Union
premise ∈ a A
premise ∈ b B
conclusion ∈ orderedPair a b powerSet powerSet ∪ A B
{
  prove ∈ a ∪ A B d5036b7bd1f8054f54a2ccbe06169976406b3c34f776c4970f70cce1213a84c8 () (a, A, B) p0
  prove ∈ b ∪ A B 3934182eb9a158255503c3f89add40bbec2df3dd151306da9ffbe1ba6f0ccf6a () (b, B, A) p1
  prove ∈ singleton a powerSet ∪ A B c6c5d5f39722c96ed2ec96208cef40d1a1d3bc3a1525d4ee389d742cbb585c07 () (a, ∪ A B) 0
  prove ∈ pair a b powerSet ∪ A B e2380d69712871e4a19d22f0a3647a2dde277f9963e9a4fd9a43ab0d9f3f639c () (a, ∪ A B, b) 0 1
  prove ∈ pair singleton a pair a b powerSet powerSet ∪ A B e2380d69712871e4a19d22f0a3647a2dde277f9963e9a4fd9a43ab0d9f3f639c () (singleton a, powerSet ∪ A B, pair a b) 2 3
  prove = orderedPair a b pair singleton a pair a b 20416614abb9fbe0f01a094dbc9b86ed7246f84025771d98135acae7e0dbc523 () (a, b)
  prove ∈ orderedPair a b powerSet powerSet ∪ A B 9170cbe4f2646ec72e06c477f3e51bd4f71fa1cf39b511c0ab94db9526767d3a (∈ $0 powerSet powerSet ∪ A B) (orderedPair a b, pair singleton a pair a b) 5 4
}

term product (A B)
  name (Cartesian Product)
  format (A × B) requires-brackets
  (= $0 comprehension x powerSet powerSet ∪ A B ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 orderedPair $$0 $0)
  shorthand (prod)

theorem Membership Condition for Cartesian Product
conclusion ∀ x ↔ ∈ $0 product A B ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 orderedPair $$0 $0
{
  prove = product A B comprehension y powerSet powerSet ∪ A B ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 orderedPair $$0 $0 1e2c83e13a9307acf5b3453fbb4a006828b56c7b7418af8e4243ea700e4535fd () (A, B)
  prove ∀ x ↔ ∈ $0 product A B ∧ ∈ $0 powerSet powerSet ∪ A B ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 orderedPair $$0 $0 0b2d9903e9202c928baabe7ccf1a595df99610f3c1386d08ecd5e7198645045d (∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 orderedPair $$0 $0) (product A B, powerSet powerSet ∪ A B) 0
  take x {
    assume ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 orderedPair $$0 $0 {
      let c ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 orderedPair $$0 $0 6f651defad28a88ffdb61d8b66f9280e4ae1293d389ac3b6dd7c0cd7d55ac919 (∧ ∈ $$0 A ∃ b ∧ ∈ $0 B = $$0 orderedPair $$$0 $0, ∈ $0 powerSet powerSet ∪ A B) () {
        let d ∧ ∈ $0 B = $$$0 orderedPair $$0 $0 6f651defad28a88ffdb61d8b66f9280e4ae1293d389ac3b6dd7c0cd7d55ac919 (∧ ∈ $$$0 B = $$0 orderedPair $0 $$$0, ∈ $$0 powerSet powerSet ∪ A B) () {
          prove ∈ orderedPair $$0 $0 powerSet powerSet ∪ A B eab7d44f0c2d9d9e8a281ad0ecf6d66a81342479f3c7eade9233924cfdf3a8b5 () ($$0, A, $0, B) 2.0.0a 594251b6ea5693171d3e341888c5d2e826933ccd9cf4f970bb3c11b0b66d455d 2.0.0.0a 594251b6ea5693171d3e341888c5d2e826933ccd9cf4f970bb3c11b0b66d455d
          prove ∈ $$$0 powerSet powerSet ∪ A B 9170cbe4f2646ec72e06c477f3e51bd4f71fa1cf39b511c0ab94db9526767d3a (∈ $$$$0 powerSet powerSet ∪ A B) ($$$0, orderedPair $$0 $0) 2.0.0.0a 79dae0450feb7d61abde03d698bc79179fafbebf10d10717ec2b63db8402478c 2.0.0.0.0
        } 2.0.0a 79dae0450feb7d61abde03d698bc79179fafbebf10d10717ec2b63db8402478c
      } 2.0a
    }
    prove ↔ ∧ ∈ $0 powerSet powerSet ∪ A B ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 orderedPair $$0 $0 ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 orderedPair $$0 $0 6301d09d66b0a087d37eb6fdfb57305fb0584d31883012474d1101001436cb7e (∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 orderedPair $$0 $0, ∈ $0 powerSet powerSet ∪ A B) () 2.0
  }
  elided e831334d732135d832bd3ac83e0dba8855e79c596c5b2642510c909e139d251c {
    take x {
      prove ↔ ∈ $0 product A B ∧ ∈ $0 powerSet powerSet ∪ A B ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 orderedPair $$0 $0 0cb17466105080c94fe8bcf5a03a3ce50923caf8e4503edd8cbeec53c98ed627 (↔ ∈ $$0 product A B ∧ ∈ $$0 powerSet powerSet ∪ A B ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$$0 orderedPair $$0 $0) ($0) 1
      prove ↔ ∧ ∈ $0 powerSet powerSet ∪ A B ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 orderedPair $$0 $0 ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 orderedPair $$0 $0 0cb17466105080c94fe8bcf5a03a3ce50923caf8e4503edd8cbeec53c98ed627 (↔ ∧ ∈ $$0 powerSet powerSet ∪ A B ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$$0 orderedPair $$0 $0 ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$$0 orderedPair $$0 $0) ($0) 2
      prove ↔ ∈ $0 product A B ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 orderedPair $$0 $0 e831334d732135d832bd3ac83e0dba8855e79c596c5b2642510c909e139d251c (∈ $0 product A B, ∧ ∈ $0 powerSet powerSet ∪ A B ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 orderedPair $$0 $0, ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 orderedPair $$0 $0) () 3.0.0 3.0.1
    }
  }
}

theorem Element of Cartesian Product
premise ∈ X product A B
conclusion ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = X orderedPair $$0 $0
{
  prove ∀ x ↔ ∈ $0 product A B ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 orderedPair $$0 $0 df6b015fa69eee3f1de533c682fb88b8beb6dbe2789ab09fc4cb95eada5e6712 () (A, B)
  elided fcb30f9b730a512f5115a87da8601fd980b1ac111cf3fdb118978263718c0066 {
    prove ↔ ∈ X product A B ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = X orderedPair $$0 $0 0cb17466105080c94fe8bcf5a03a3ce50923caf8e4503edd8cbeec53c98ed627 (↔ ∈ $0 product A B ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 orderedPair $$0 $0) (X) 0
    prove → ∈ X product A B ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = X orderedPair $$0 $0 f52a64651ebe26ac0a89861f589c8ea822f14de99cc435c8115d97330a16dee9 (∈ X product A B, ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = X orderedPair $$0 $0) () 1.0
    prove ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = X orderedPair $$0 $0 fcb30f9b730a512f5115a87da8601fd980b1ac111cf3fdb118978263718c0066 (∈ X product A B, ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = X orderedPair $$0 $0) () 1.1 p0
  }
}

theorem First Coordinate of Element of Cartesian Product
premise ∈ x product A B
conclusion ∈ first x A
{
  prove ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = x orderedPair $$0 $0 2c5898a93d503f67864a5f7946c9db3d7c9c578a1ccb09f54d947eb150789919 () (x, A, B) p0
  prove ∃ a ∃ b = x orderedPair $$0 $0 5e69e56604bf32ad206851cf5900da0450ffb3ab6632698486f03fb4281f29e2 (∈ $0 A, ∈ $0 B, = x orderedPair $0 $1) () 0
  let a_x ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = x orderedPair $$0 $0 6f651defad28a88ffdb61d8b66f9280e4ae1293d389ac3b6dd7c0cd7d55ac919 (∧ ∈ $0 A ∃ b ∧ ∈ $0 B = x orderedPair $$0 $0, ∈ first x A) () {
    prove ∃! a ∃ b = x orderedPair $$0 $0 136100f31adf5e972a94c89b409f0ee62d929bb044ad898baf522b07bb64c0a7 () (x) 1
    prove ∃ b = x orderedPair first x $0 627c9ee25bcca8ee601a41541fce48306f1e7a731864726c87a241235b71423f () (x) 1
    prove ∃ b = x orderedPair $$0 $0 82bc5a035b55ef94c2408b53dd2c57fd0e98c636406d98bc4e4e7d28868a4f77 (∈ $$0 B, = x orderedPair $0 $$0) () 2a 79dae0450feb7d61abde03d698bc79179fafbebf10d10717ec2b63db8402478c
    prove = first x $0 361f1150a27a554e24965716cc1901ca29fbbf94859ead72334b42d86d7a8938 (∃ b = x orderedPair $$$0 $0) (first x, $0) 2.0 2.1 2.2
    prove ∈ first x A 9170cbe4f2646ec72e06c477f3e51bd4f71fa1cf39b511c0ab94db9526767d3a (∈ $$0 A) (first x, $0) 2.3 2a 594251b6ea5693171d3e341888c5d2e826933ccd9cf4f970bb3c11b0b66d455d
  } 0
}

theorem Second Coordinate of Element of Cartesian Product
premise ∈ x product A B
conclusion ∈ second x B
{
  prove ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = x orderedPair $$0 $0 2c5898a93d503f67864a5f7946c9db3d7c9c578a1ccb09f54d947eb150789919 () (x, A, B) p0
  prove ∃ a ∃ b = x orderedPair $$0 $0 5e69e56604bf32ad206851cf5900da0450ffb3ab6632698486f03fb4281f29e2 (∈ $0 A, ∈ $0 B, = x orderedPair $0 $1) () 0
  prove ∃ b ∧ ∈ $0 B ∃ a ∧ ∈ $0 A = x orderedPair $0 $$0 02f6a793a5e0ec2904eb7e3a2a4cc7ad743e0c1ddf557084efa52942910f91f5 (∈ $0 A, ∈ $0 B, = x orderedPair $0 $1) () 0
  let b_x ∧ ∈ $0 B ∃ a ∧ ∈ $0 A = x orderedPair $0 $$0 6f651defad28a88ffdb61d8b66f9280e4ae1293d389ac3b6dd7c0cd7d55ac919 (∧ ∈ $0 B ∃ a ∧ ∈ $0 A = x orderedPair $0 $$0, ∈ second x B) () {
    prove ∃! b ∃ a = x orderedPair $0 $$0 a03a52595f30aa9f017d4c100fbd868c8b7419433bcc0d815351d04ee5982300 () (x) 1
    prove ∃ a = x orderedPair $0 second x 4373ef9021e142193e755f11b93fde380a93be178d6596c9e9c462dacd2bdaae () (x) 1
    prove ∃ a = x orderedPair $0 $$0 82bc5a035b55ef94c2408b53dd2c57fd0e98c636406d98bc4e4e7d28868a4f77 (∈ $$0 A, = x orderedPair $$0 $0) () 3a 79dae0450feb7d61abde03d698bc79179fafbebf10d10717ec2b63db8402478c
    prove = second x $0 361f1150a27a554e24965716cc1901ca29fbbf94859ead72334b42d86d7a8938 (∃ a = x orderedPair $0 $$$0) (second x, $0) 3.0 3.1 3.2
    prove ∈ second x B 9170cbe4f2646ec72e06c477f3e51bd4f71fa1cf39b511c0ab94db9526767d3a (∈ $$0 B) (second x, $0) 3.3 3a 594251b6ea5693171d3e341888c5d2e826933ccd9cf4f970bb3c11b0b66d455d
  } 2
}

theorem Element of Cartesian Product from Coordinates
premise ∈ x product A B
conclusion = x orderedPair first x second x
{
  prove ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = x orderedPair $$0 $0 2c5898a93d503f67864a5f7946c9db3d7c9c578a1ccb09f54d947eb150789919 () (x, A, B) p0
  prove ∃ a ∃ b = x orderedPair $$0 $0 5e69e56604bf32ad206851cf5900da0450ffb3ab6632698486f03fb4281f29e2 (∈ $0 A, ∈ $0 B, = x orderedPair $0 $1) () 0
  prove = x orderedPair first x second x 79e207fc9c24524ef98db5b100b9b26d00522e3895a1993ad7f63bf59a147c36 () (x) 1
}

theorem Ordered Pair Is Element of Cartesian Product
premise ∈ a A
premise ∈ b B
conclusion ∈ orderedPair a b product A B
{
  prove ∀ x ↔ ∈ $0 product A B ∃ a' ∧ ∈ $0 A ∃ b' ∧ ∈ $0 B = $$$0 orderedPair $$0 $0 df6b015fa69eee3f1de533c682fb88b8beb6dbe2789ab09fc4cb95eada5e6712 () (A, B)
  prove = orderedPair a b orderedPair a b 5219290cd02226ba51f9a52acabbe8b9a53b0f6dbadd81739189b9c069fe07dc () (orderedPair a b)
  elided c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd {
    prove ∧ ∈ b B = orderedPair a b orderedPair a b bc1fc0568356141664497252cc943713e9412219fc93ad0255a3037abf24d00d (∈ b B, = orderedPair a b orderedPair a b) () p1 1
    prove ∃ b' ∧ ∈ $0 B = orderedPair a b orderedPair a $0 c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd (∧ ∈ $0 B = orderedPair a b orderedPair a $0) (b) 2.0
  }
  elided c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd {
    prove ∧ ∈ a A ∃ b' ∧ ∈ $0 B = orderedPair a b orderedPair a $0 bc1fc0568356141664497252cc943713e9412219fc93ad0255a3037abf24d00d (∈ a A, ∃ b' ∧ ∈ $0 B = orderedPair a b orderedPair a $0) () p0 2
    prove ∃ a' ∧ ∈ $0 A ∃ b' ∧ ∈ $0 B = orderedPair a b orderedPair $$0 $0 c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd (∧ ∈ $0 A ∃ b' ∧ ∈ $0 B = orderedPair a b orderedPair $$0 $0) (a) 3.0
  }
  elided fcb30f9b730a512f5115a87da8601fd980b1ac111cf3fdb118978263718c0066 {
    prove ↔ ∈ orderedPair a b product A B ∃ a' ∧ ∈ $0 A ∃ b' ∧ ∈ $0 B = orderedPair a b orderedPair $$0 $0 0cb17466105080c94fe8bcf5a03a3ce50923caf8e4503edd8cbeec53c98ed627 (↔ ∈ $0 product A B ∃ a' ∧ ∈ $0 A ∃ b' ∧ ∈ $0 B = $$$0 orderedPair $$0 $0) (orderedPair a b) 0
    prove → ∃ a' ∧ ∈ $0 A ∃ b' ∧ ∈ $0 B = orderedPair a b orderedPair $$0 $0 ∈ orderedPair a b product A B 65429f3e8963218e6bd1b43bd33d6ada4d6eb6a7f09ffb2b180910917684f0d5 (∈ orderedPair a b product A B, ∃ a' ∧ ∈ $0 A ∃ b' ∧ ∈ $0 B = orderedPair a b orderedPair $$0 $0) () 4.0
    prove ∈ orderedPair a b product A B fcb30f9b730a512f5115a87da8601fd980b1ac111cf3fdb118978263718c0066 (∃ a' ∧ ∈ $0 A ∃ b' ∧ ∈ $0 B = orderedPair a b orderedPair $$0 $0, ∈ orderedPair a b product A B) () 4.1 3
  }
}

theorem First Coordinate of Ordered Pair in Cartesian Product
premise ∈ orderedPair a b product A B
conclusion ∈ a A
{
  prove ∈ first orderedPair a b A 680c0e8e2adbe95e3a5c5674de474e5006ce154342b98fb00c3c3a417685c73a () (orderedPair a b, A, B) p0
  prove = first orderedPair a b a 73cc85cbef2ac714cb4869efdfdafe7abc733e1b893ebbb8eaa3444eab4ed8f5 () (a, b)
  prove ∈ a A 91709a3b29f9f5f3c0b8e961a3c5382d08fbc5583f3542a858fa9c4a9cddc2c0 (∈ $0 A) (first orderedPair a b, a) 1 0
}

theorem Second Coordinate of Ordered Pair in Cartesian Product
premise ∈ orderedPair a b product A B
conclusion ∈ b B
{
  prove = second orderedPair a b b 1fe4b81bac2623292694265bc84b9471a1524c4b96355c4dfb3b3a0e5e1c94a2 () (a, b)
  prove ∈ second orderedPair a b B 5d63038423db3295a77b50d036a380b80e533a76e1ff94cae2200a89167b7171 () (orderedPair a b, A, B) p0
  prove ∈ b B 91709a3b29f9f5f3c0b8e961a3c5382d08fbc5583f3542a858fa9c4a9cddc2c0 (∈ $0 B) (second orderedPair a b, b) 0 1
}

theorem Product of Subsets Is Subset of Product
premise ⊆ A C
premise ⊆ B D
conclusion ⊆ product A B product C D
{
  take x {
    assume ∈ $0 product A B {
      prove = $0 orderedPair first $0 second $0 754cf5cc61442d27f1eec1f7f7d7bebb365558976b52cef6993830180276393c () ($0, A, B) 0.0a
      prove ∈ first $0 A 680c0e8e2adbe95e3a5c5674de474e5006ce154342b98fb00c3c3a417685c73a () ($0, A, B) 0.0a
      prove ∈ second $0 B 5d63038423db3295a77b50d036a380b80e533a76e1ff94cae2200a89167b7171 () ($0, A, B) 0.0a
      prove ∈ first $0 C ff37f458545f4531362d785e49474caeaf61befe5f251a1724a6c9c4fe0ede1c () (A, C, first $0) p0 0.0.1
      prove ∈ second $0 D ff37f458545f4531362d785e49474caeaf61befe5f251a1724a6c9c4fe0ede1c () (B, D, second $0) p1 0.0.2
      prove ∈ orderedPair first $0 second $0 product C D 133a8023f5290d9efd5d4afaa982b92980bfdde08be94573c715890097f0a8c1 () (first $0, C, second $0, D) 0.0.3 0.0.4
      prove ∈ $0 product C D 9170cbe4f2646ec72e06c477f3e51bd4f71fa1cf39b511c0ab94db9526767d3a (∈ $$0 product C D) ($0, orderedPair first $0 second $0) 0.0.0 0.0.5
    }
  }
  prove ⊆ product A B product C D 661665a947563caee66f924b537a676a531e3780284a0ebe20f4a0eddde58698 () (product A B, product C D) 0
}

theorem Product Preserves Subset
premise ⊆ A B
conclusion ⊆ product A C product B C
{
  prove ⊆ C C f44f38fb228f6b7d73c261c9471169d869df0e8b489f65d14b3dd21b8b32808f () (C)
  prove ⊆ product A C product B C 6bbb6169c3ec678f48e5b5c14cc6b825eaf5b5b4432607e78f7f4c67307bcdb8 () (A, B, C, C) p0 0
}

theorem Product Preserves Subset
premise ⊆ A B
conclusion ⊆ product C A product C B
{
  prove ⊆ C C f44f38fb228f6b7d73c261c9471169d869df0e8b489f65d14b3dd21b8b32808f () (C)
  prove ⊆ product C A product C B 6bbb6169c3ec678f48e5b5c14cc6b825eaf5b5b4432607e78f7f4c67307bcdb8 () (C, C, A, B) 0 p0
}

theorem Universal Condition for Elements of Cartesian Product by Coordinates
conclusion ↔ ∀ x → ∈ $0 product A B with (first $0 second $0) φ ∀ a → ∈ $0 A ∀ b → ∈ $0 B with ($$0 $0) φ
{
  assume ∀ x → ∈ $0 product A B with (first $0 second $0) φ {
    take a {
      assume ∈ $0 A {
        take b {
          assume ∈ $0 B {
            prove ∈ orderedPair $$0 $0 product A B 133a8023f5290d9efd5d4afaa982b92980bfdde08be94573c715890097f0a8c1 () ($$0, A, $0, B) 0.0.0a 0.0.0.0.0a
            elided (Extracted) {
              prove → ∈ orderedPair $$0 $0 product A B with (first orderedPair $$0 $0 second orderedPair $$0 $0) φ 0cb17466105080c94fe8bcf5a03a3ce50923caf8e4503edd8cbeec53c98ed627 (→ ∈ $$$0 product A B with (first $$$0 second $$$0) φ) (orderedPair $$0 $0) 0a
              prove with (first orderedPair $$0 $0 second orderedPair $$0 $0) φ fcb30f9b730a512f5115a87da8601fd980b1ac111cf3fdb118978263718c0066 (∈ orderedPair $$0 $0 product A B, with (first orderedPair $$0 $0 second orderedPair $$0 $0) φ) () 0.0.0.0.0.1.0 0.0.0.0.0.0
            }
            elided (Rewritten) {
              elided 73cc85cbef2ac714cb4869efdfdafe7abc733e1b893ebbb8eaa3444eab4ed8f5 {
                prove = first orderedPair $$0 $0 $$0 73cc85cbef2ac714cb4869efdfdafe7abc733e1b893ebbb8eaa3444eab4ed8f5 () ($$0, $0)
                prove with ($$0 second orderedPair $$0 $0) φ 91709a3b29f9f5f3c0b8e961a3c5382d08fbc5583f3542a858fa9c4a9cddc2c0 (with ($$$0 second orderedPair $$0 $0) φ) (first orderedPair $$0 $0, $$0) 0.0.0.0.0.2.0.0 0.0.0.0.0.1
              }
              elided 1fe4b81bac2623292694265bc84b9471a1524c4b96355c4dfb3b3a0e5e1c94a2 {
                prove = second orderedPair $$0 $0 $0 1fe4b81bac2623292694265bc84b9471a1524c4b96355c4dfb3b3a0e5e1c94a2 () ($$0, $0)
                prove with ($$0 $0) φ 91709a3b29f9f5f3c0b8e961a3c5382d08fbc5583f3542a858fa9c4a9cddc2c0 (with ($$0 $$$0) φ) (second orderedPair $$0 $0, $0) 0.0.0.0.0.2.1.0 0.0.0.0.0.2.0
              }
            }
          }
        }
      }
    }
  }
  assume ∀ a → ∈ $0 A ∀ b → ∈ $0 B with ($$0 $0) φ {
    take x {
      assume ∈ $0 product A B {
        prove ∈ first $0 A 680c0e8e2adbe95e3a5c5674de474e5006ce154342b98fb00c3c3a417685c73a () ($0, A, B) 1.0.0a
        prove ∈ second $0 B 5d63038423db3295a77b50d036a380b80e533a76e1ff94cae2200a89167b7171 () ($0, A, B) 1.0.0a
        elided (Extracted) {
          prove → ∈ first $0 A ∀ b → ∈ $0 B with (first $$0 $0) φ 0cb17466105080c94fe8bcf5a03a3ce50923caf8e4503edd8cbeec53c98ed627 (→ ∈ $$0 A ∀ b → ∈ $0 B with ($$$0 $0) φ) (first $0) 1a
          prove ∀ b → ∈ $0 B with (first $$0 $0) φ fcb30f9b730a512f5115a87da8601fd980b1ac111cf3fdb118978263718c0066 (∈ first $0 A, ∀ b → ∈ $0 B with (first $$0 $0) φ) () 1.0.0.2.0 1.0.0.0
          prove → ∈ second $0 B with (first $0 second $0) φ 0cb17466105080c94fe8bcf5a03a3ce50923caf8e4503edd8cbeec53c98ed627 (→ ∈ $$0 B with (first $0 $$0) φ) (second $0) 1.0.0.2.1
          prove with (first $0 second $0) φ fcb30f9b730a512f5115a87da8601fd980b1ac111cf3fdb118978263718c0066 (∈ second $0 B, with (first $0 second $0) φ) () 1.0.0.2.2 1.0.0.1
        }
      }
    }
  }
  prove ↔ ∀ x → ∈ $0 product A B with (first $0 second $0) φ ∀ a → ∈ $0 A ∀ b → ∈ $0 B with ($$0 $0) φ 9e0a237dc75cb44e80e2401bebc55474cab9b9e31adef7f947be54b717825758 (∀ x → ∈ $0 product A B with (first $0 second $0) φ, ∀ a → ∈ $0 A ∀ b → ∈ $0 B with ($$0 $0) φ) () 0 1
}

theorem Existence Condition for Element of Cartesian Product by Coordinates
conclusion ↔ ∃ x ∧ ∈ $0 product A B with (first $0 second $0) φ ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B with ($$0 $0) φ
{
  assume ∃ x ∧ ∈ $0 product A B with (first $0 second $0) φ {
    let x ∧ ∈ $0 product A B with (first $0 second $0) φ 6f651defad28a88ffdb61d8b66f9280e4ae1293d389ac3b6dd7c0cd7d55ac919 (∧ ∈ $0 product A B with (first $0 second $0) φ, ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B with ($$0 $0) φ) () {
      prove ∈ first $0 A 680c0e8e2adbe95e3a5c5674de474e5006ce154342b98fb00c3c3a417685c73a () ($0, A, B) 0.0a 594251b6ea5693171d3e341888c5d2e826933ccd9cf4f970bb3c11b0b66d455d
      prove ∈ second $0 B 5d63038423db3295a77b50d036a380b80e533a76e1ff94cae2200a89167b7171 () ($0, A, B) 0.0a 594251b6ea5693171d3e341888c5d2e826933ccd9cf4f970bb3c11b0b66d455d
      elided c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd {
        prove ∧ ∈ second $0 B with (first $0 second $0) φ bc1fc0568356141664497252cc943713e9412219fc93ad0255a3037abf24d00d (∈ second $0 B, with (first $0 second $0) φ) () 0.0.1 0.0a 79dae0450feb7d61abde03d698bc79179fafbebf10d10717ec2b63db8402478c
        prove ∃ b ∧ ∈ $0 B with (first $$0 $0) φ c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd (∧ ∈ $$0 B with (first $0 $$0) φ) (second $0) 0.0.2.0
      }
      elided c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd {
        prove ∧ ∈ first $0 A ∃ b ∧ ∈ $0 B with (first $$0 $0) φ bc1fc0568356141664497252cc943713e9412219fc93ad0255a3037abf24d00d (∈ first $0 A, ∃ b ∧ ∈ $0 B with (first $$0 $0) φ) () 0.0.0 0.0.2
        prove ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B with ($$0 $0) φ c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd (∧ ∈ $$0 A ∃ b ∧ ∈ $0 B with ($$$0 $0) φ) (first $0) 0.0.3.0
      }
    } 0a
  }
  assume ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B with ($$0 $0) φ {
    let a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B with ($$0 $0) φ 6f651defad28a88ffdb61d8b66f9280e4ae1293d389ac3b6dd7c0cd7d55ac919 (∧ ∈ $0 A ∃ b ∧ ∈ $0 B with ($$0 $0) φ, ∃ x ∧ ∈ $0 product A B with (first $0 second $0) φ) () {
      let b ∧ ∈ $0 B with ($$0 $0) φ 6f651defad28a88ffdb61d8b66f9280e4ae1293d389ac3b6dd7c0cd7d55ac919 (∧ ∈ $$0 B with ($0 $$0) φ, ∃ x ∧ ∈ $0 product A B with (first $0 second $0) φ) () {
        elided (Rewritten) {
          elided 73cc85cbef2ac714cb4869efdfdafe7abc733e1b893ebbb8eaa3444eab4ed8f5 {
            prove = first orderedPair $$0 $0 $$0 73cc85cbef2ac714cb4869efdfdafe7abc733e1b893ebbb8eaa3444eab4ed8f5 () ($$0, $0)
            prove = $$0 first orderedPair $$0 $0 4567f51620a8049fe91ed02631eb7e57332cbda0ced00a4271ed8493a14d4802 () (first orderedPair $$0 $0, $$0) 1.0.0.0.0.0
            prove with (first orderedPair $$0 $0 $0) φ 91709a3b29f9f5f3c0b8e961a3c5382d08fbc5583f3542a858fa9c4a9cddc2c0 (with ($$$0 $0) φ) ($$0, first orderedPair $$0 $0) 1.0.0.0.0.1 1.0.0a 79dae0450feb7d61abde03d698bc79179fafbebf10d10717ec2b63db8402478c
          }
          elided 1fe4b81bac2623292694265bc84b9471a1524c4b96355c4dfb3b3a0e5e1c94a2 {
            prove = second orderedPair $$0 $0 $0 1fe4b81bac2623292694265bc84b9471a1524c4b96355c4dfb3b3a0e5e1c94a2 () ($$0, $0)
            prove = $0 second orderedPair $$0 $0 4567f51620a8049fe91ed02631eb7e57332cbda0ced00a4271ed8493a14d4802 () (second orderedPair $$0 $0, $0) 1.0.0.0.1.0
            prove with (first orderedPair $$0 $0 second orderedPair $$0 $0) φ 91709a3b29f9f5f3c0b8e961a3c5382d08fbc5583f3542a858fa9c4a9cddc2c0 (with (first orderedPair $$0 $0 $$$0) φ) ($0, second orderedPair $$0 $0) 1.0.0.0.1.1 1.0.0.0.0
          }
        }
        elided c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd {
          prove ∈ orderedPair $$0 $0 product A B 133a8023f5290d9efd5d4afaa982b92980bfdde08be94573c715890097f0a8c1 () ($$0, A, $0, B) 1.0a 594251b6ea5693171d3e341888c5d2e826933ccd9cf4f970bb3c11b0b66d455d 1.0.0a 594251b6ea5693171d3e341888c5d2e826933ccd9cf4f970bb3c11b0b66d455d
          prove ∧ ∈ orderedPair $$0 $0 product A B with (first orderedPair $$0 $0 second orderedPair $$0 $0) φ bc1fc0568356141664497252cc943713e9412219fc93ad0255a3037abf24d00d (∈ orderedPair $$0 $0 product A B, with (first orderedPair $$0 $0 second orderedPair $$0 $0) φ) () 1.0.0.1.0 1.0.0.0
          prove ∃ x ∧ ∈ $0 product A B with (first $0 second $0) φ c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd (∧ ∈ $$$0 product A B with (first $$$0 second $$$0) φ) (orderedPair $$0 $0) 1.0.0.1.1
        }
      } 1.0a 79dae0450feb7d61abde03d698bc79179fafbebf10d10717ec2b63db8402478c
    } 1a
  }
  prove ↔ ∃ x ∧ ∈ $0 product A B with (first $0 second $0) φ ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B with ($$0 $0) φ 9e0a237dc75cb44e80e2401bebc55474cab9b9e31adef7f947be54b717825758 (∃ x ∧ ∈ $0 product A B with (first $0 second $0) φ, ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B with ($$0 $0) φ) () 0 1
}

comment Extend the notation for replacement sets to replacing from a cartesian product.

term replacementSet2 ($a $b A B with (a b) F)
  name (Double Replacement Set)
  format ({ F | a ∈ A, b ∈ B })
  (= $0 replacementSet x product A B with (first $0 second $0) F)

theorem Membership Condition for Double Replacement Set
premise = S replacementSet2 a b A B with ($0 $1) F
conclusion ∀ s ↔ ∈ $0 S ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 with ($$0 $0) F
{
  elided 8b76a0802629bcb822d880e677d89c65a34b20c33f93c325d7f8ed6410029f42 {
    prove = replacementSet2 a b A B with ($0 $1) F replacementSet x product A B with (first $0 second $0) F 8b76a0802629bcb822d880e677d89c65a34b20c33f93c325d7f8ed6410029f42 () (A, B, with ($0 $1) F)
    prove = S replacementSet x product A B with (first $0 second $0) F 91709a3b29f9f5f3c0b8e961a3c5382d08fbc5583f3542a858fa9c4a9cddc2c0 (= S $0) (replacementSet2 a b A B with ($0 $1) F, replacementSet x product A B with (first $0 second $0) F) 0.0 p0
  }
  take s {
    elided b29d1a2902ac2af3d85c5a939ca36f99c1a246caf6799bcf64e4b7a3ad1a40d0 {
      prove ∀ s ↔ ∈ $0 S ∃ x ∧ ∈ $0 product A B = $$0 with (first $0 second $0) F b29d1a2902ac2af3d85c5a939ca36f99c1a246caf6799bcf64e4b7a3ad1a40d0 () (S, product A B, with (first $$0 second $$0) F) 0
      prove ↔ ∈ $0 S ∃ x ∧ ∈ $0 product A B = $$0 with (first $0 second $0) F 0cb17466105080c94fe8bcf5a03a3ce50923caf8e4503edd8cbeec53c98ed627 (↔ ∈ $$0 S ∃ a ∧ ∈ $0 product A B = $$$0 with (first $0 second $0) F) ($0) 1.0.0
    }
    prove ↔ ∃ x ∧ ∈ $0 product A B = $$0 with (first $0 second $0) F ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 with ($$0 $0) F 9b11dabc80b002471bf4fe9d1158738b1774574d22c59ade63f22ca427a8dd3d (= $0 with ($$0 $$1) F) (A, B)
    prove ↔ ∈ $0 S ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 with ($$0 $0) F e831334d732135d832bd3ac83e0dba8855e79c596c5b2642510c909e139d251c (∈ $0 S, ∃ a ∧ ∈ $0 product A B = $$0 with (first $0 second $0) F, ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 with ($$0 $0) F) () 1.0 1.1
  }
}

theorem Function of Element is Element of Double Replacement Set
premise = S replacementSet2 a b A B with ($0 $1) F
premise ∈ a A
premise ∈ b B
conclusion ∈ with (a b) F S
{
  elided 8b76a0802629bcb822d880e677d89c65a34b20c33f93c325d7f8ed6410029f42 {
    prove = replacementSet2 a b A B with ($0 $1) F replacementSet x product A B with (first $0 second $0) F 8b76a0802629bcb822d880e677d89c65a34b20c33f93c325d7f8ed6410029f42 () (A, B, with ($0 $1) F)
    prove = S replacementSet x product A B with (first $0 second $0) F 91709a3b29f9f5f3c0b8e961a3c5382d08fbc5583f3542a858fa9c4a9cddc2c0 (= S $0) (replacementSet2 a b A B with ($0 $1) F, replacementSet x product A B with (first $0 second $0) F) 0.0 p0
  }
  prove = with (a b) F with (a b) F 5219290cd02226ba51f9a52acabbe8b9a53b0f6dbadd81739189b9c069fe07dc () (with (a b) F)
  elided c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd {
    prove ∧ ∈ b B = with (a b) F with (a b) F bc1fc0568356141664497252cc943713e9412219fc93ad0255a3037abf24d00d (∈ b B, = with (a b) F with (a b) F) () p2 1
    prove ∃ b ∧ ∈ $0 B = with (a b) F with (a $0) F c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd (∧ ∈ $0 B = with (a b) F with (a $0) F) (b) 2.0
  }
  elided c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd {
    prove ∧ ∈ a A ∃ b ∧ ∈ $0 B = with (a b) F with (a $0) F bc1fc0568356141664497252cc943713e9412219fc93ad0255a3037abf24d00d (∈ a A, ∃ b ∧ ∈ $0 B = with (a b) F with (a $0) F) () p1 2
    prove ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = with (a b) F with ($$0 $0) F c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd (∧ ∈ $0 A ∃ b ∧ ∈ $0 B = with (a b) F with ($$0 $0) F) (a) 3.0
  }
  elided ebb8be00eebd96cd87cc4a62556e85ccc16209694e5304dc07150061a100e3a2 {
    prove ∀ s ↔ ∈ $0 S ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 with ($$0 $0) F ebb8be00eebd96cd87cc4a62556e85ccc16209694e5304dc07150061a100e3a2 () (S, A, B, with ($0 $1) F) p0
    prove ↔ ∈ with (a b) F S ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = with (a b) F with ($$0 $0) F 0cb17466105080c94fe8bcf5a03a3ce50923caf8e4503edd8cbeec53c98ed627 (↔ ∈ $0 S ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = $$$0 with ($$0 $0) F) (with (a b) F) 4.0
    prove → ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = with (a b) F with ($$0 $0) F ∈ with (a b) F S 65429f3e8963218e6bd1b43bd33d6ada4d6eb6a7f09ffb2b180910917684f0d5 (∈ with (a b) F S, ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = with (a b) F with ($$0 $0) F) () 4.1
    prove ∈ with (a b) F S fcb30f9b730a512f5115a87da8601fd980b1ac111cf3fdb118978263718c0066 (∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B = with (a b) F with ($$0 $0) F, ∈ with (a b) F S) () 4.2 3
  }
}

comment And then extend that to replacing from a cartesian product of cartesian products.

term replacementSet4 ($a $b $c $d A B C D with (a b c d) F)
  name (Quadruple Replacement Set)
  format ({ F | a ∈ A, b ∈ B, c ∈ C, d ∈ D })
  (= $0 replacementSet2 x y product A B product C D with (first $0 second $0 first $1 second $1) F)

theorem Membership Condition for Quadruple Replacement Set
premise = S replacementSet4 a b c d A B C D with ($0 $1 $2 $3) F
conclusion ∀ s ↔ ∈ $0 S ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B ∃ c ∧ ∈ $0 C ∃ d ∧ ∈ $0 D = $$$$$0 with ($$$$0 $$$0 $$0 $0) F
{
  elided 6c5f8cf4caf8abbf50781294753cbb4cba0c5b4083605347a256544bab804cc5 {
    prove = replacementSet4 a b c d A B C D with ($0 $1 $2 $3) F replacementSet2 x y product A B product C D with (first $0 second $0 first $1 second $1) F 6c5f8cf4caf8abbf50781294753cbb4cba0c5b4083605347a256544bab804cc5 () (A, B, C, D, with ($0 $1 $2 $3) F)
    prove = S replacementSet2 x y product A B product C D with (first $0 second $0 first $1 second $1) F 91709a3b29f9f5f3c0b8e961a3c5382d08fbc5583f3542a858fa9c4a9cddc2c0 (= S $0) (replacementSet4 a b c d A B C D with ($0 $1 $2 $3) F, replacementSet2 x y product A B product C D with (first $0 second $0 first $1 second $1) F) 0.0 p0
  }
  take s {
    elided ebb8be00eebd96cd87cc4a62556e85ccc16209694e5304dc07150061a100e3a2 {
      prove ∀ s ↔ ∈ $0 S ∃ x ∧ ∈ $0 product A B ∃ y ∧ ∈ $0 product C D = $$$0 with (first $$0 second $$0 first $0 second $0) F ebb8be00eebd96cd87cc4a62556e85ccc16209694e5304dc07150061a100e3a2 () (S, product A B, product C D, with (first $$0 second $$0 first $$1 second $$1) F) 0
      prove ↔ ∈ $0 S ∃ x ∧ ∈ $0 product A B ∃ y ∧ ∈ $0 product C D = $$$0 with (first $$0 second $$0 first $0 second $0) F 0cb17466105080c94fe8bcf5a03a3ce50923caf8e4503edd8cbeec53c98ed627 (↔ ∈ $$0 S ∃ a ∧ ∈ $0 product A B ∃ b ∧ ∈ $0 product C D = $$$$0 with (first $$0 second $$0 first $0 second $0) F) ($0) 1.0.0
    }
    elided 9b11dabc80b002471bf4fe9d1158738b1774574d22c59ade63f22ca427a8dd3d {
      take x {
        assume ∈ $0 product A B {
          prove ↔ ∃ y ∧ ∈ $0 product C D = $$$0 with (first $$0 second $$0 first $0 second $0) F ∃ c ∧ ∈ $0 C ∃ d ∧ ∈ $0 D = $$$$0 with (first $$$0 second $$$0 $$0 $0) F 9b11dabc80b002471bf4fe9d1158738b1774574d22c59ade63f22ca427a8dd3d (= $$0 with (first $0 second $0 $$$0 $$$1) F) (C, D)
        }
      }
      prove ↔ ∃ x ∧ ∈ $0 product A B ∃ y ∧ ∈ $0 product C D = $$$0 with (first $$0 second $$0 first $0 second $0) F ∃ x ∧ ∈ $0 product A B ∃ c ∧ ∈ $0 C ∃ d ∧ ∈ $0 D = $$$$0 with (first $$$0 second $$$0 $$0 $0) F 1afad0bea64206b6b7f77399dfb1bccf39702504c0859b92a57a9240edc099a6 (∈ $$0 product A B, ∃ y ∧ ∈ $0 product C D = $$0 with (first $$$0 second $$$0 first $0 second $0) F, ∃ c ∧ ∈ $0 C ∃ d ∧ ∈ $0 D = $$$0 with (first $$$$0 second $$$$0 $$0 $0) F) () 1.1.0
    }
    prove ↔ ∈ $0 S ∃ x ∧ ∈ $0 product A B ∃ c ∧ ∈ $0 C ∃ d ∧ ∈ $0 D = $$$$0 with (first $$$0 second $$$0 $$0 $0) F e831334d732135d832bd3ac83e0dba8855e79c596c5b2642510c909e139d251c (∈ $0 S, ∃ a ∧ ∈ $0 product A B ∃ b ∧ ∈ $0 product C D = $$$0 with (first $$0 second $$0 first $0 second $0) F, ∃ x ∧ ∈ $0 product A B ∃ c ∧ ∈ $0 C ∃ d ∧ ∈ $0 D = $$$$0 with (first $$$0 second $$$0 $$0 $0) F) () 1.0 1.1
    prove ↔ ∃ x ∧ ∈ $0 product A B ∃ c ∧ ∈ $0 C ∃ d ∧ ∈ $0 D = $$$$0 with (first $$$0 second $$$0 $$0 $0) F ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B ∃ c ∧ ∈ $0 C ∃ d ∧ ∈ $0 D = $$$$$0 with ($$$$0 $$$0 $$0 $0) F 9b11dabc80b002471bf4fe9d1158738b1774574d22c59ade63f22ca427a8dd3d (∃ c ∧ ∈ $0 C ∃ d ∧ ∈ $0 D = $$$0 with ($$$$0 $$$$1 $$0 $0) F) (A, B)
    prove ↔ ∈ $0 S ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B ∃ c ∧ ∈ $0 C ∃ d ∧ ∈ $0 D = $$$$$0 with ($$$$0 $$$0 $$0 $0) F e831334d732135d832bd3ac83e0dba8855e79c596c5b2642510c909e139d251c (∈ $0 S, ∃ x ∧ ∈ $0 product A B ∃ c ∧ ∈ $0 C ∃ d ∧ ∈ $0 D = $$$$0 with (first $$$0 second $$$0 $$0 $0) F, ∃ a ∧ ∈ $0 A ∃ b ∧ ∈ $0 B ∃ c ∧ ∈ $0 C ∃ d ∧ ∈ $0 D = $$$$$0 with ($$$$0 $$$0 $$0 $0) F) () 1.2 1.3
  }
}

theorem Function of Element is Element of Quadruple Replacement Set
premise = S replacementSet4 a b c d A B C D with ($0 $1 $2 $3) F
premise ∈ a A
premise ∈ b B
premise ∈ c C
premise ∈ d D
conclusion ∈ with (a b c d) F S
{
  elided 6c5f8cf4caf8abbf50781294753cbb4cba0c5b4083605347a256544bab804cc5 {
    prove = replacementSet4 a b c d A B C D with ($0 $1 $2 $3) F replacementSet2 x y product A B product C D with (first $0 second $0 first $1 second $1) F 6c5f8cf4caf8abbf50781294753cbb4cba0c5b4083605347a256544bab804cc5 () (A, B, C, D, with ($0 $1 $2 $3) F)
    prove = S replacementSet2 x y product A B product C D with (first $0 second $0 first $1 second $1) F 91709a3b29f9f5f3c0b8e961a3c5382d08fbc5583f3542a858fa9c4a9cddc2c0 (= S $0) (replacementSet4 a b c d A B C D with ($0 $1 $2 $3) F, replacementSet2 x y product A B product C D with (first $0 second $0 first $1 second $1) F) 0.0 p0
  }
  elided (Rewritten) {
    elided 73cc85cbef2ac714cb4869efdfdafe7abc733e1b893ebbb8eaa3444eab4ed8f5 {
      prove = first orderedPair a b a 73cc85cbef2ac714cb4869efdfdafe7abc733e1b893ebbb8eaa3444eab4ed8f5 () (a, b)
      prove = a first orderedPair a b 4567f51620a8049fe91ed02631eb7e57332cbda0ced00a4271ed8493a14d4802 () (first orderedPair a b, a) 1.0.0
      prove = with (a b c d) F with (first orderedPair a b b c d) F 1997b7acba285749f5310f91f0d3cd3da0791cc38c2f7f575c3aa898a8ccc472 () (a, first orderedPair a b, with ($0 b c d) F) 1.0.1
    }
    elided 1fe4b81bac2623292694265bc84b9471a1524c4b96355c4dfb3b3a0e5e1c94a2 {
      prove = second orderedPair a b b 1fe4b81bac2623292694265bc84b9471a1524c4b96355c4dfb3b3a0e5e1c94a2 () (a, b)
      prove = b second orderedPair a b 4567f51620a8049fe91ed02631eb7e57332cbda0ced00a4271ed8493a14d4802 () (second orderedPair a b, b) 1.1.0
      prove = with (first orderedPair a b b c d) F with (first orderedPair a b second orderedPair a b c d) F 1997b7acba285749f5310f91f0d3cd3da0791cc38c2f7f575c3aa898a8ccc472 () (b, second orderedPair a b, with (first orderedPair a b $0 c d) F) 1.1.1
    }
    prove = with (a b c d) F with (first orderedPair a b second orderedPair a b c d) F 45671747ce3e408665d1f6b74999f63b9bd5247d3ad1b4daef8032d6e7aab796 () (with (a b c d) F, with (first orderedPair a b b c d) F, with (first orderedPair a b second orderedPair a b c d) F) 1.0 1.1
    elided 73cc85cbef2ac714cb4869efdfdafe7abc733e1b893ebbb8eaa3444eab4ed8f5 {
      prove = first orderedPair c d c 73cc85cbef2ac714cb4869efdfdafe7abc733e1b893ebbb8eaa3444eab4ed8f5 () (c, d)
      prove = c first orderedPair c d 4567f51620a8049fe91ed02631eb7e57332cbda0ced00a4271ed8493a14d4802 () (first orderedPair c d, c) 1.3.0
      prove = with (first orderedPair a b second orderedPair a b c d) F with (first orderedPair a b second orderedPair a b first orderedPair c d d) F 1997b7acba285749f5310f91f0d3cd3da0791cc38c2f7f575c3aa898a8ccc472 () (c, first orderedPair c d, with (first orderedPair a b second orderedPair a b $0 d) F) 1.3.1
    }
    prove = with (a b c d) F with (first orderedPair a b second orderedPair a b first orderedPair c d d) F 45671747ce3e408665d1f6b74999f63b9bd5247d3ad1b4daef8032d6e7aab796 () (with (a b c d) F, with (first orderedPair a b second orderedPair a b c d) F, with (first orderedPair a b second orderedPair a b first orderedPair c d d) F) 1.2 1.3
    elided 1fe4b81bac2623292694265bc84b9471a1524c4b96355c4dfb3b3a0e5e1c94a2 {
      prove = second orderedPair c d d 1fe4b81bac2623292694265bc84b9471a1524c4b96355c4dfb3b3a0e5e1c94a2 () (c, d)
      prove = d second orderedPair c d 4567f51620a8049fe91ed02631eb7e57332cbda0ced00a4271ed8493a14d4802 () (second orderedPair c d, d) 1.5.0
      prove = with (first orderedPair a b second orderedPair a b first orderedPair c d d) F with (first orderedPair a b second orderedPair a b first orderedPair c d second orderedPair c d) F 1997b7acba285749f5310f91f0d3cd3da0791cc38c2f7f575c3aa898a8ccc472 () (d, second orderedPair c d, with (first orderedPair a b second orderedPair a b first orderedPair c d $0) F) 1.5.1
    }
    prove = with (a b c d) F with (first orderedPair a b second orderedPair a b first orderedPair c d second orderedPair c d) F 45671747ce3e408665d1f6b74999f63b9bd5247d3ad1b4daef8032d6e7aab796 () (with (a b c d) F, with (first orderedPair a b second orderedPair a b first orderedPair c d d) F, with (first orderedPair a b second orderedPair a b first orderedPair c d second orderedPair c d) F) 1.4 1.5
  }
  elided c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd {
    prove ∈ orderedPair c d product C D 133a8023f5290d9efd5d4afaa982b92980bfdde08be94573c715890097f0a8c1 () (c, C, d, D) p3 p4
    prove ∧ ∈ orderedPair c d product C D = with (a b c d) F with (first orderedPair a b second orderedPair a b first orderedPair c d second orderedPair c d) F bc1fc0568356141664497252cc943713e9412219fc93ad0255a3037abf24d00d (∈ orderedPair c d product C D, = with (a b c d) F with (first orderedPair a b second orderedPair a b first orderedPair c d second orderedPair c d) F) () 2.0 1
    prove ∃ y ∧ ∈ $0 product C D = with (a b c d) F with (first orderedPair a b second orderedPair a b first $0 second $0) F c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd (∧ ∈ $0 product C D = with (a b c d) F with (first orderedPair a b second orderedPair a b first $0 second $0) F) (orderedPair c d) 2.1
  }
  elided c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd {
    prove ∈ orderedPair a b product A B 133a8023f5290d9efd5d4afaa982b92980bfdde08be94573c715890097f0a8c1 () (a, A, b, B) p1 p2
    prove ∧ ∈ orderedPair a b product A B ∃ y ∧ ∈ $0 product C D = with (a b c d) F with (first orderedPair a b second orderedPair a b first $0 second $0) F bc1fc0568356141664497252cc943713e9412219fc93ad0255a3037abf24d00d (∈ orderedPair a b product A B, ∃ y ∧ ∈ $0 product C D = with (a b c d) F with (first orderedPair a b second orderedPair a b first $0 second $0) F) () 3.0 2
    prove ∃ x ∧ ∈ $0 product A B ∃ y ∧ ∈ $0 product C D = with (a b c d) F with (first $$0 second $$0 first $0 second $0) F c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd (∧ ∈ $0 product A B ∃ y ∧ ∈ $0 product C D = with (a b c d) F with (first $$0 second $$0 first $0 second $0) F) (orderedPair a b) 3.1
  }
  elided ebb8be00eebd96cd87cc4a62556e85ccc16209694e5304dc07150061a100e3a2 {
    prove ∀ s ↔ ∈ $0 S ∃ x ∧ ∈ $0 product A B ∃ y ∧ ∈ $0 product C D = $$$0 with (first $$0 second $$0 first $0 second $0) F ebb8be00eebd96cd87cc4a62556e85ccc16209694e5304dc07150061a100e3a2 () (S, product A B, product C D, with (first $0 second $0 first $1 second $1) F) 0
    prove ↔ ∈ with (a b c d) F S ∃ x ∧ ∈ $0 product A B ∃ y ∧ ∈ $0 product C D = with (a b c d) F with (first $$0 second $$0 first $0 second $0) F 0cb17466105080c94fe8bcf5a03a3ce50923caf8e4503edd8cbeec53c98ed627 (↔ ∈ $0 S ∃ a ∧ ∈ $0 product A B ∃ b ∧ ∈ $0 product C D = $$$0 with (first $$0 second $$0 first $0 second $0) F) (with (a b c d) F) 4.0
    prove → ∃ x ∧ ∈ $0 product A B ∃ y ∧ ∈ $0 product C D = with (a b c d) F with (first $$0 second $$0 first $0 second $0) F ∈ with (a b c d) F S 65429f3e8963218e6bd1b43bd33d6ada4d6eb6a7f09ffb2b180910917684f0d5 (∈ with (a b c d) F S, ∃ a ∧ ∈ $0 product A B ∃ b ∧ ∈ $0 product C D = with (a b c d) F with (first $$0 second $$0 first $0 second $0) F) () 4.1
    prove ∈ with (a b c d) F S fcb30f9b730a512f5115a87da8601fd980b1ac111cf3fdb118978263718c0066 (∃ a ∧ ∈ $0 product A B ∃ b ∧ ∈ $0 product C D = with (a b c d) F with (first $$0 second $$0 first $0 second $0) F, ∈ with (a b c d) F S) () 4.2 3
  }
}

term comprehension2 ($a $b A B with (a b) φ)
  name (Product Comprehension)
  format ({ (a, b) ∈ A × B | φ })
  (= $0 comprehension x product A B with (first $0 second $0) φ)
  shorthand (pcomp)

theorem Membership Condition for Product Comprehension
premise = S comprehension2 a b A B with ($0 $1) φ
conclusion ∀ a → ∈ $0 A ∀ b → ∈ $0 B ↔ ∈ orderedPair $$0 $0 S with ($$0 $0) φ
{
  elided c7fa3a33d5c72ce3a34caee57f97db61092b85a7f6a61793d65437911e784505 {
    prove = comprehension2 a b A B with ($0 $1) φ comprehension x product A B with (first $0 second $0) φ c7fa3a33d5c72ce3a34caee57f97db61092b85a7f6a61793d65437911e784505 (with ($0 $1) φ) (A, B)
    elided 91709a3b29f9f5f3c0b8e961a3c5382d08fbc5583f3542a858fa9c4a9cddc2c0 {
      prove = comprehension2 a b A B with ($0 $1) φ S 4567f51620a8049fe91ed02631eb7e57332cbda0ced00a4271ed8493a14d4802 () (S, comprehension2 a b A B with ($0 $1) φ) p0
      prove = S comprehension x product A B with (first $0 second $0) φ 91709a3b29f9f5f3c0b8e961a3c5382d08fbc5583f3542a858fa9c4a9cddc2c0 (= $0 comprehension x product A B with (first $0 second $0) φ) (comprehension2 a b A B with ($0 $1) φ, S) 0.1.0 0.0
    }
  }
  prove ∀ y ↔ ∈ $0 S ∧ ∈ $0 product A B with (first $0 second $0) φ 0b2d9903e9202c928baabe7ccf1a595df99610f3c1386d08ecd5e7198645045d (with (first $0 second $0) φ) (S, product A B) 0
  take a {
    assume ∈ $0 A {
      take b {
        assume ∈ $0 B {
          assume ∈ orderedPair $$0 $0 S {
            elided (Extracted) {
              prove ↔ ∈ orderedPair $$0 $0 S ∧ ∈ orderedPair $$0 $0 product A B with (first orderedPair $$0 $0 second orderedPair $$0 $0) φ 0cb17466105080c94fe8bcf5a03a3ce50923caf8e4503edd8cbeec53c98ed627 (↔ ∈ $$$0 S ∧ ∈ $$$0 product A B with (first $$$0 second $$$0) φ) (orderedPair $$0 $0) 1
              prove → ∈ orderedPair $$0 $0 S ∧ ∈ orderedPair $$0 $0 product A B with (first orderedPair $$0 $0 second orderedPair $$0 $0) φ f52a64651ebe26ac0a89861f589c8ea822f14de99cc435c8115d97330a16dee9 (∈ orderedPair $$0 $0 S, ∧ ∈ orderedPair $$0 $0 product A B with (first orderedPair $$0 $0 second orderedPair $$0 $0) φ) () 2.0.0.0.0.0.0
              prove ∧ ∈ orderedPair $$0 $0 product A B with (first orderedPair $$0 $0 second orderedPair $$0 $0) φ fcb30f9b730a512f5115a87da8601fd980b1ac111cf3fdb118978263718c0066 (∈ orderedPair $$0 $0 S, ∧ ∈ orderedPair $$0 $0 product A B with (first orderedPair $$0 $0 second orderedPair $$0 $0) φ) () 2.0.0.0.0.0.1 2.0.0.0.0a
            }
            elided (Rewritten) {
              elided 73cc85cbef2ac714cb4869efdfdafe7abc733e1b893ebbb8eaa3444eab4ed8f5 {
                prove = first orderedPair $$0 $0 $$0 73cc85cbef2ac714cb4869efdfdafe7abc733e1b893ebbb8eaa3444eab4ed8f5 () ($$0, $0)
                prove with ($$0 second orderedPair $$0 $0) φ 91709a3b29f9f5f3c0b8e961a3c5382d08fbc5583f3542a858fa9c4a9cddc2c0 (with ($$$0 second orderedPair $$0 $0) φ) (first orderedPair $$0 $0, $$0) 2.0.0.0.0.1.0.0 2.0.0.0.0.0 79dae0450feb7d61abde03d698bc79179fafbebf10d10717ec2b63db8402478c
              }
              elided 1fe4b81bac2623292694265bc84b9471a1524c4b96355c4dfb3b3a0e5e1c94a2 {
                prove = second orderedPair $$0 $0 $0 1fe4b81bac2623292694265bc84b9471a1524c4b96355c4dfb3b3a0e5e1c94a2 () ($$0, $0)
                prove with ($$0 $0) φ 91709a3b29f9f5f3c0b8e961a3c5382d08fbc5583f3542a858fa9c4a9cddc2c0 (with ($$0 $$$0) φ) (second orderedPair $$0 $0, $0) 2.0.0.0.0.1.1.0 2.0.0.0.0.1.0
              }
            }
          }
          assume with ($$0 $0) φ {
            prove ∈ orderedPair $$0 $0 product A B 133a8023f5290d9efd5d4afaa982b92980bfdde08be94573c715890097f0a8c1 () ($$0, A, $0, B) 2.0a 2.0.0.0a
            elided (Rewritten) {
              elided (Rewritten) {
                elided (Rewritten) {
                  prove = first orderedPair $$0 $0 $$0 73cc85cbef2ac714cb4869efdfdafe7abc733e1b893ebbb8eaa3444eab4ed8f5 () ($$0, $0)
                  prove = $$0 first orderedPair $$0 $0 4567f51620a8049fe91ed02631eb7e57332cbda0ced00a4271ed8493a14d4802 () (first orderedPair $$0 $0, $$0) 2.0.0.0.1.1.0.0.0
                }
                prove with (first orderedPair $$0 $0 $0) φ 91709a3b29f9f5f3c0b8e961a3c5382d08fbc5583f3542a858fa9c4a9cddc2c0 (with ($$$0 $0) φ) ($$0, first orderedPair $$0 $0) 2.0.0.0.1.1.0.0 2.0.0.0.1a
              }
              elided (Rewritten) {
                elided (Rewritten) {
                  prove = second orderedPair $$0 $0 $0 1fe4b81bac2623292694265bc84b9471a1524c4b96355c4dfb3b3a0e5e1c94a2 () ($$0, $0)
                  prove = $0 second orderedPair $$0 $0 4567f51620a8049fe91ed02631eb7e57332cbda0ced00a4271ed8493a14d4802 () (second orderedPair $$0 $0, $0) 2.0.0.0.1.1.1.0.0
                }
                prove with (first orderedPair $$0 $0 second orderedPair $$0 $0) φ 91709a3b29f9f5f3c0b8e961a3c5382d08fbc5583f3542a858fa9c4a9cddc2c0 (with (first orderedPair $$0 $0 $$$0) φ) ($0, second orderedPair $$0 $0) 2.0.0.0.1.1.1.0 2.0.0.0.1.1.0
              }
            }
            elided (Extracted) {
              prove ↔ ∈ orderedPair $$0 $0 S ∧ ∈ orderedPair $$0 $0 product A B with (first orderedPair $$0 $0 second orderedPair $$0 $0) φ 0cb17466105080c94fe8bcf5a03a3ce50923caf8e4503edd8cbeec53c98ed627 (↔ ∈ $$$0 S ∧ ∈ $$$0 product A B with (first $$$0 second $$$0) φ) (orderedPair $$0 $0) 1
              prove → ∧ ∈ orderedPair $$0 $0 product A B with (first orderedPair $$0 $0 second orderedPair $$0 $0) φ ∈ orderedPair $$0 $0 S 65429f3e8963218e6bd1b43bd33d6ada4d6eb6a7f09ffb2b180910917684f0d5 (∈ orderedPair $$0 $0 S, ∧ ∈ orderedPair $$0 $0 product A B with (first orderedPair $$0 $0 second orderedPair $$0 $0) φ) () 2.0.0.0.1.2.0
              elided fcb30f9b730a512f5115a87da8601fd980b1ac111cf3fdb118978263718c0066 {
                prove ∧ ∈ orderedPair $$0 $0 product A B with (first orderedPair $$0 $0 second orderedPair $$0 $0) φ bc1fc0568356141664497252cc943713e9412219fc93ad0255a3037abf24d00d (∈ orderedPair $$0 $0 product A B, with (first orderedPair $$0 $0 second orderedPair $$0 $0) φ) () 2.0.0.0.1.0 2.0.0.0.1.1
                prove ∈ orderedPair $$0 $0 S fcb30f9b730a512f5115a87da8601fd980b1ac111cf3fdb118978263718c0066 (∧ ∈ orderedPair $$0 $0 product A B with (first orderedPair $$0 $0 second orderedPair $$0 $0) φ, ∈ orderedPair $$0 $0 S) () 2.0.0.0.1.2.1 2.0.0.0.1.2.2.0
              }
            }
          }
          prove ↔ ∈ orderedPair $$0 $0 S with ($$0 $0) φ 9e0a237dc75cb44e80e2401bebc55474cab9b9e31adef7f947be54b717825758 (∈ orderedPair $$0 $0 S, with ($$0 $0) φ) () 2.0.0.0.0 2.0.0.0.1
        }
      }
    }
  }
}

theorem Product Comprehension Is a Subset of Its Product
premise = S comprehension2 a b A B with ($0 $1) φ
conclusion ⊆ S product A B
{
  prove = comprehension2 a b A B with ($0 $1) φ comprehension x product A B with (first $0 second $0) φ c7fa3a33d5c72ce3a34caee57f97db61092b85a7f6a61793d65437911e784505 (with ($0 $1) φ) (A, B)
  elided 91709a3b29f9f5f3c0b8e961a3c5382d08fbc5583f3542a858fa9c4a9cddc2c0 {
    prove = comprehension2 a b A B with ($0 $1) φ S 4567f51620a8049fe91ed02631eb7e57332cbda0ced00a4271ed8493a14d4802 () (S, comprehension2 a b A B with ($0 $1) φ) p0
    prove = S comprehension x product A B with (first $0 second $0) φ 91709a3b29f9f5f3c0b8e961a3c5382d08fbc5583f3542a858fa9c4a9cddc2c0 (= $0 comprehension x product A B with (first $0 second $0) φ) (comprehension2 a b A B with ($0 $1) φ, S) 1.0 0
  }
  prove ⊆ S product A B 1d335bf2331cb9d9c352ddf52b6b5c8f3a3725dd931809ffcfe524e3c977286a (with (first $0 second $0) φ) (S, product A B) 1
}

term comprehension4 ($a $b $c $d A B C D with (a b c d) φ)
  name (quadruple comprehension)
  format ({ ((a, b), (c, d)) ∈ (A × B) × (C × D) | φ })
  (= $0 comprehension2 x y product A B product C D with (first $0 second $0 first $1 second $1) φ)

theorem Membership Condition for Quadruple Comprehension
premise = S comprehension4 a b c d A B C D with ($0 $1 $2 $3) φ
conclusion ∀ a → ∈ $0 A ∀ b → ∈ $0 B ∀ c → ∈ $0 C ∀ d → ∈ $0 D ↔ ∈ orderedPair orderedPair $$$$0 $$$0 orderedPair $$0 $0 S with ($$$$0 $$$0 $$0 $0) φ
{
  elided 677ecc60855bbf2461af136176f6178256526de82e9caeba8e76159de76667fd {
    prove = comprehension4 a b c d A B C D with ($0 $1 $2 $3) φ comprehension2 x y product A B product C D with (first $0 second $0 first $1 second $1) φ 677ecc60855bbf2461af136176f6178256526de82e9caeba8e76159de76667fd (with ($0 $1 $2 $3) φ) (A, B, C, D)
    prove = S comprehension2 x y product A B product C D with (first $0 second $0 first $1 second $1) φ 91709a3b29f9f5f3c0b8e961a3c5382d08fbc5583f3542a858fa9c4a9cddc2c0 (= S $0) (comprehension4 a b c d A B C D with ($0 $1 $2 $3) φ, comprehension2 x y product A B product C D with (first $0 second $0 first $1 second $1) φ) 0.0 p0
  }
  prove ∀ x → ∈ $0 product A B ∀ y → ∈ $0 product C D ↔ ∈ orderedPair $$0 $0 S with (first $$0 second $$0 first $0 second $0) φ 51b0b4eef90a9ab8afa2ff8ec5ec798ee03eb8c8703c549ebb7fe4fead064830 (with (first $0 second $0 first $1 second $1) φ) (S, product A B, product C D) 0
  elided 754cf5cc61442d27f1eec1f7f7d7bebb365558976b52cef6993830180276393c {
    take x {
      assume ∈ $0 product A B {
        take y {
          assume ∈ $0 product C D {
            elided (Extracted) {
              prove → ∈ $$0 product A B ∀ y → ∈ $0 product C D ↔ ∈ orderedPair $$$0 $0 S with (first $$$0 second $$$0 first $0 second $0) φ 0cb17466105080c94fe8bcf5a03a3ce50923caf8e4503edd8cbeec53c98ed627 (→ ∈ $$$0 product A B ∀ y → ∈ $0 product C D ↔ ∈ orderedPair $$$$0 $0 S with (first $$$$0 second $$$$0 first $0 second $0) φ) ($$0) 1
              prove ∀ y → ∈ $0 product C D ↔ ∈ orderedPair $$$0 $0 S with (first $$$0 second $$$0 first $0 second $0) φ fcb30f9b730a512f5115a87da8601fd980b1ac111cf3fdb118978263718c0066 (∈ $$0 product A B, ∀ y → ∈ $0 product C D ↔ ∈ orderedPair $$$0 $0 S with (first $$$0 second $$$0 first $0 second $0) φ) () 2.0.0.0.0.0.0 2.0.0a
              prove → ∈ $0 product C D ↔ ∈ orderedPair $$0 $0 S with (first $$0 second $$0 first $0 second $0) φ 0cb17466105080c94fe8bcf5a03a3ce50923caf8e4503edd8cbeec53c98ed627 (→ ∈ $$$0 product C D ↔ ∈ orderedPair $$0 $$$0 S with (first $$0 second $$0 first $$$0 second $$$0) φ) ($0) 2.0.0.0.0.0.1
              prove ↔ ∈ orderedPair $$0 $0 S with (first $$0 second $$0 first $0 second $0) φ fcb30f9b730a512f5115a87da8601fd980b1ac111cf3fdb118978263718c0066 (∈ $0 product C D, ↔ ∈ orderedPair $$0 $0 S with (first $$0 second $$0 first $0 second $0) φ) () 2.0.0.0.0.0.2 2.0.0.0.0a
            }
            elided 754cf5cc61442d27f1eec1f7f7d7bebb365558976b52cef6993830180276393c {
              elided 754cf5cc61442d27f1eec1f7f7d7bebb365558976b52cef6993830180276393c {
                prove = $$0 orderedPair first $$0 second $$0 754cf5cc61442d27f1eec1f7f7d7bebb365558976b52cef6993830180276393c () ($$0, A, B) 2.0.0a
                prove ↔ ∈ orderedPair orderedPair first $$0 second $$0 $0 S with (first $$0 second $$0 first $0 second $0) φ 91709a3b29f9f5f3c0b8e961a3c5382d08fbc5583f3542a858fa9c4a9cddc2c0 (↔ ∈ orderedPair $$$0 $0 S with (first $$0 second $$0 first $0 second $0) φ) ($$0, orderedPair first $$0 second $$0) 2.0.0.0.0.1.0.0 2.0.0.0.0.0
              }
              elided 754cf5cc61442d27f1eec1f7f7d7bebb365558976b52cef6993830180276393c {
                prove = $0 orderedPair first $0 second $0 754cf5cc61442d27f1eec1f7f7d7bebb365558976b52cef6993830180276393c () ($0, C, D) 2.0.0.0.0a
                prove ↔ ∈ orderedPair orderedPair first $$0 second $$0 orderedPair first $0 second $0 S with (first $$0 second $$0 first $0 second $0) φ 91709a3b29f9f5f3c0b8e961a3c5382d08fbc5583f3542a858fa9c4a9cddc2c0 (↔ ∈ orderedPair orderedPair first $$0 second $$0 $$$0 S with (first $$0 second $$0 first $0 second $0) φ) ($0, orderedPair first $0 second $0) 2.0.0.0.0.1.1.0 2.0.0.0.0.1.0
              }
            }
          }
        }
      }
    }
  }
  elided 248ead457a5ea22f39eea9433df16553470ff1d8fa0047c868cbb31568d3e0d9 {
    take x {
      assume ∈ $0 product A B {
        elided (Extracted) {
          prove → ∈ $0 product A B ∀ y → ∈ $0 product C D ↔ ∈ orderedPair orderedPair first $$0 second $$0 orderedPair first $0 second $0 S with (first $$0 second $$0 first $0 second $0) φ 0cb17466105080c94fe8bcf5a03a3ce50923caf8e4503edd8cbeec53c98ed627 (→ ∈ $$0 product A B ∀ y → ∈ $0 product C D ↔ ∈ orderedPair orderedPair first $$$0 second $$$0 orderedPair first $0 second $0 S with (first $$$0 second $$$0 first $0 second $0) φ) ($0) 2
          prove ∀ y → ∈ $0 product C D ↔ ∈ orderedPair orderedPair first $$0 second $$0 orderedPair first $0 second $0 S with (first $$0 second $$0 first $0 second $0) φ fcb30f9b730a512f5115a87da8601fd980b1ac111cf3fdb118978263718c0066 (∈ $0 product A B, ∀ y → ∈ $0 product C D ↔ ∈ orderedPair orderedPair first $$0 second $$0 orderedPair first $0 second $0 S with (first $$0 second $$0 first $0 second $0) φ) () 3.0.0.0.0 3.0.0a
        }
        elided 248ead457a5ea22f39eea9433df16553470ff1d8fa0047c868cbb31568d3e0d9 {
          prove ↔ ∀ x → ∈ $0 product C D ↔ ∈ orderedPair orderedPair first $$0 second $$0 orderedPair first $0 second $0 S with (first $$0 second $$0 first $0 second $0) φ ∀ c → ∈ $0 C ∀ d → ∈ $0 D ↔ ∈ orderedPair orderedPair first $$$0 second $$$0 orderedPair $$0 $0 S with (first $$$0 second $$$0 $$0 $0) φ 248ead457a5ea22f39eea9433df16553470ff1d8fa0047c868cbb31568d3e0d9 (↔ ∈ orderedPair orderedPair first $0 second $0 orderedPair $$0 $$1 S with (first $0 second $0 $$0 $$1) φ) (C, D)
          prove → ∀ x → ∈ $0 product C D ↔ ∈ orderedPair orderedPair first $$0 second $$0 orderedPair first $0 second $0 S with (first $$0 second $$0 first $0 second $0) φ ∀ c → ∈ $0 C ∀ d → ∈ $0 D ↔ ∈ orderedPair orderedPair first $$$0 second $$$0 orderedPair $$0 $0 S with (first $$$0 second $$$0 $$0 $0) φ f52a64651ebe26ac0a89861f589c8ea822f14de99cc435c8115d97330a16dee9 (∀ x → ∈ $0 product C D ↔ ∈ orderedPair orderedPair first $$0 second $$0 orderedPair first $0 second $0 S with (first $$0 second $$0 first $0 second $0) φ, ∀ a → ∈ $0 C ∀ b → ∈ $0 D ↔ ∈ orderedPair orderedPair first $$$0 second $$$0 orderedPair $$0 $0 S with (first $$$0 second $$$0 $$0 $0) φ) () 3.0.0.1.0
          prove ∀ c → ∈ $0 C ∀ d → ∈ $0 D ↔ ∈ orderedPair orderedPair first $$$0 second $$$0 orderedPair $$0 $0 S with (first $$$0 second $$$0 $$0 $0) φ fcb30f9b730a512f5115a87da8601fd980b1ac111cf3fdb118978263718c0066 (∀ x → ∈ $0 product C D ↔ ∈ orderedPair orderedPair first $$0 second $$0 orderedPair first $0 second $0 S with (first $$0 second $$0 first $0 second $0) φ, ∀ a → ∈ $0 C ∀ b → ∈ $0 D ↔ ∈ orderedPair orderedPair first $$$0 second $$$0 orderedPair $$0 $0 S with (first $$$0 second $$$0 $$0 $0) φ) () 3.0.0.1.1 3.0.0.0
        }
      }
    }
  }
  elided 248ead457a5ea22f39eea9433df16553470ff1d8fa0047c868cbb31568d3e0d9 {
    prove ↔ ∀ x → ∈ $0 product A B ∀ c → ∈ $0 C ∀ d → ∈ $0 D ↔ ∈ orderedPair orderedPair first $$$0 second $$$0 orderedPair $$0 $0 S with (first $$$0 second $$$0 $$0 $0) φ ∀ a → ∈ $0 A ∀ b → ∈ $0 B ∀ c → ∈ $0 C ∀ d → ∈ $0 D ↔ ∈ orderedPair orderedPair $$$$0 $$$0 orderedPair $$0 $0 S with ($$$$0 $$$0 $$0 $0) φ 248ead457a5ea22f39eea9433df16553470ff1d8fa0047c868cbb31568d3e0d9 (∀ c → ∈ $0 C ∀ d → ∈ $0 D ↔ ∈ orderedPair orderedPair $$$0 $$$1 orderedPair $$0 $0 S with ($$$0 $$$1 $$0 $0) φ) (A, B)
    prove → ∀ x → ∈ $0 product A B ∀ c → ∈ $0 C ∀ d → ∈ $0 D ↔ ∈ orderedPair orderedPair first $$$0 second $$$0 orderedPair $$0 $0 S with (first $$$0 second $$$0 $$0 $0) φ ∀ a → ∈ $0 A ∀ b → ∈ $0 B ∀ c → ∈ $0 C ∀ d → ∈ $0 D ↔ ∈ orderedPair orderedPair $$$$0 $$$0 orderedPair $$0 $0 S with ($$$$0 $$$0 $$0 $0) φ f52a64651ebe26ac0a89861f589c8ea822f14de99cc435c8115d97330a16dee9 (∀ x → ∈ $0 product A B ∀ c → ∈ $0 C ∀ d → ∈ $0 D ↔ ∈ orderedPair orderedPair first $$$0 second $$$0 orderedPair $$0 $0 S with (first $$$0 second $$$0 $$0 $0) φ, ∀ a → ∈ $0 A ∀ b → ∈ $0 B ∀ c → ∈ $0 C ∀ d → ∈ $0 D ↔ ∈ orderedPair orderedPair $$$$0 $$$0 orderedPair $$0 $0 S with ($$$$0 $$$0 $$0 $0) φ) () 4.0
    prove ∀ a → ∈ $0 A ∀ b → ∈ $0 B ∀ c → ∈ $0 C ∀ d → ∈ $0 D ↔ ∈ orderedPair orderedPair $$$$0 $$$0 orderedPair $$0 $0 S with ($$$$0 $$$0 $$0 $0) φ fcb30f9b730a512f5115a87da8601fd980b1ac111cf3fdb118978263718c0066 (∀ x → ∈ $0 product A B ∀ c → ∈ $0 C ∀ d → ∈ $0 D ↔ ∈ orderedPair orderedPair first $$$0 second $$$0 orderedPair $$0 $0 S with (first $$$0 second $$$0 $$0 $0) φ, ∀ a → ∈ $0 A ∀ b → ∈ $0 B ∀ c → ∈ $0 C ∀ d → ∈ $0 D ↔ ∈ orderedPair orderedPair $$$$0 $$$0 orderedPair $$0 $0 S with ($$$$0 $$$0 $$0 $0) φ) () 4.1 3
  }
}

comment Show that double unions contain both elements of any of their members that are ordered pairs.

theorem Double Union Contains First Element of Ordered Pair
premise ∈ orderedPair a b X
conclusion ∈ a union union X
{
  prove ∈ singleton a orderedPair a b d92b71337c8692a5cd350a01fdfcaf921a5cf5b9bfdcb0eeb3976647b04edcb3 () (a, b)
  elided c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd {
    prove ∧ ∈ singleton a orderedPair a b ∈ orderedPair a b X bc1fc0568356141664497252cc943713e9412219fc93ad0255a3037abf24d00d (∈ singleton a orderedPair a b, ∈ orderedPair a b X) () 0 p0
    prove ∃ y ∧ ∈ singleton a $0 ∈ $0 X c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd (∧ ∈ singleton a $0 ∈ $0 X) (orderedPair a b) 1.0
  }
  elided f474fd89d9035729bcccaa0f61a87387ba186e9f395b141c6a42dc47d439323c {
    prove ∀ x ↔ ∈ $0 union X ∃ y ∧ ∈ $$0 $0 ∈ $0 X f474fd89d9035729bcccaa0f61a87387ba186e9f395b141c6a42dc47d439323c () (X)
    prove ↔ ∈ singleton a union X ∃ y ∧ ∈ singleton a $0 ∈ $0 X 0cb17466105080c94fe8bcf5a03a3ce50923caf8e4503edd8cbeec53c98ed627 (↔ ∈ $0 union X ∃ y ∧ ∈ $$0 $0 ∈ $0 X) (singleton a) 2.0
    prove → ∃ y ∧ ∈ singleton a $0 ∈ $0 X ∈ singleton a union X 65429f3e8963218e6bd1b43bd33d6ada4d6eb6a7f09ffb2b180910917684f0d5 (∈ singleton a union X, ∃ y ∧ ∈ singleton a $0 ∈ $0 X) () 2.1
    prove ∈ singleton a union X fcb30f9b730a512f5115a87da8601fd980b1ac111cf3fdb118978263718c0066 (∃ y ∧ ∈ singleton a $0 ∈ $0 X, ∈ singleton a union X) () 2.2 1
  }
  prove ∈ a singleton a e5855e5d9ee6a8e2618de2e4aead43174b17bc781361385ab8312d2d64a7efa9 () (a)
  elided c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd {
    prove ∧ ∈ a singleton a ∈ singleton a union X bc1fc0568356141664497252cc943713e9412219fc93ad0255a3037abf24d00d (∈ a singleton a, ∈ singleton a union X) () 3 2
    prove ∃ y ∧ ∈ a $0 ∈ $0 union X c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd (∧ ∈ a $0 ∈ $0 union X) (singleton a) 4.0
  }
  elided f474fd89d9035729bcccaa0f61a87387ba186e9f395b141c6a42dc47d439323c {
    prove ∀ x ↔ ∈ $0 union union X ∃ y ∧ ∈ $$0 $0 ∈ $0 union X f474fd89d9035729bcccaa0f61a87387ba186e9f395b141c6a42dc47d439323c () (union X)
    prove ↔ ∈ a union union X ∃ y ∧ ∈ a $0 ∈ $0 union X 0cb17466105080c94fe8bcf5a03a3ce50923caf8e4503edd8cbeec53c98ed627 (↔ ∈ $0 union union X ∃ y ∧ ∈ $$0 $0 ∈ $0 union X) (a) 5.0
    prove → ∃ y ∧ ∈ a $0 ∈ $0 union X ∈ a union union X 65429f3e8963218e6bd1b43bd33d6ada4d6eb6a7f09ffb2b180910917684f0d5 (∈ a union union X, ∃ y ∧ ∈ a $0 ∈ $0 union X) () 5.1
    prove ∈ a union union X fcb30f9b730a512f5115a87da8601fd980b1ac111cf3fdb118978263718c0066 (∃ y ∧ ∈ a $0 ∈ $0 union X, ∈ a union union X) () 5.2 4
  }
}

theorem Double Union Contains Second Element of Ordered Pair
premise ∈ orderedPair a b X
conclusion ∈ b union union X
{
  prove ∈ pair a b orderedPair a b ecb0a831f5c8e2151e676d37cb898297bd72fff21fb89e3505d44fba8bda77eb () (a, b)
  elided c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd {
    prove ∧ ∈ pair a b orderedPair a b ∈ orderedPair a b X bc1fc0568356141664497252cc943713e9412219fc93ad0255a3037abf24d00d (∈ pair a b orderedPair a b, ∈ orderedPair a b X) () 0 p0
    prove ∃ y ∧ ∈ pair a b $0 ∈ $0 X c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd (∧ ∈ pair a b $0 ∈ $0 X) (orderedPair a b) 1.0
  }
  elided f474fd89d9035729bcccaa0f61a87387ba186e9f395b141c6a42dc47d439323c {
    prove ∀ x ↔ ∈ $0 union X ∃ y ∧ ∈ $$0 $0 ∈ $0 X f474fd89d9035729bcccaa0f61a87387ba186e9f395b141c6a42dc47d439323c () (X)
    prove ↔ ∈ pair a b union X ∃ y ∧ ∈ pair a b $0 ∈ $0 X 0cb17466105080c94fe8bcf5a03a3ce50923caf8e4503edd8cbeec53c98ed627 (↔ ∈ $0 union X ∃ y ∧ ∈ $$0 $0 ∈ $0 X) (pair a b) 2.0
    prove → ∃ y ∧ ∈ pair a b $0 ∈ $0 X ∈ pair a b union X 65429f3e8963218e6bd1b43bd33d6ada4d6eb6a7f09ffb2b180910917684f0d5 (∈ pair a b union X, ∃ y ∧ ∈ pair a b $0 ∈ $0 X) () 2.1
    prove ∈ pair a b union X fcb30f9b730a512f5115a87da8601fd980b1ac111cf3fdb118978263718c0066 (∃ y ∧ ∈ pair a b $0 ∈ $0 X, ∈ pair a b union X) () 2.2 1
  }
  prove ∈ b pair a b c5583d9a3ff8f9a2303c940c2c619e40adc0830fdd976ec970e143e5c3b70e38 () (b, a)
  elided c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd {
    prove ∧ ∈ b pair a b ∈ pair a b union X bc1fc0568356141664497252cc943713e9412219fc93ad0255a3037abf24d00d (∈ b pair a b, ∈ pair a b union X) () 3 2
    prove ∃ y ∧ ∈ b $0 ∈ $0 union X c17db5084b27672bb6bce2c2090a844771fdd7145d5ba0aa45763e29d45703bd (∧ ∈ b $0 ∈ $0 union X) (pair a b) 4.0
  }
  elided f474fd89d9035729bcccaa0f61a87387ba186e9f395b141c6a42dc47d439323c {
    prove ∀ x ↔ ∈ $0 union union X ∃ y ∧ ∈ $$0 $0 ∈ $0 union X f474fd89d9035729bcccaa0f61a87387ba186e9f395b141c6a42dc47d439323c () (union X)
    prove ↔ ∈ b union union X ∃ y ∧ ∈ b $0 ∈ $0 union X 0cb17466105080c94fe8bcf5a03a3ce50923caf8e4503edd8cbeec53c98ed627 (↔ ∈ $0 union union X ∃ y ∧ ∈ $$0 $0 ∈ $0 union X) (b) 5.0
    prove → ∃ y ∧ ∈ b $0 ∈ $0 union X ∈ b union union X 65429f3e8963218e6bd1b43bd33d6ada4d6eb6a7f09ffb2b180910917684f0d5 (∈ b union union X, ∃ y ∧ ∈ b $0 ∈ $0 union X) () 5.1
    prove ∈ b union union X fcb30f9b730a512f5115a87da8601fd980b1ac111cf3fdb118978263718c0066 (∃ y ∧ ∈ b $0 ∈ $0 union X, ∈ b union union X) () 5.2 4
  }
}
